<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MCDONALD'S EDSA CALOOCAN | Admin Planner</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
    --bg-image: url("mcdo_cover.png"); /* üî¥ Change to your image path */
}

body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    min-height: 100vh;
    background:
        linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
        var(--bg-image) no-repeat center / cover;
    display: flex;
    flex-direction: column;
    color: #333;
}

/* ===== HEADER ===== */
.top-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px 30px;
    background: rgba(0,0,0,0.65);
    backdrop-filter: blur(6px);
    color: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.35);
    flex-shrink: 0;
}

.header-left {
    font-size: 1.3rem;
    font-weight: 700;
    letter-spacing: 1px;
}

.home-btn {
    text-decoration: none;
    background: #f2c94c;
    color: #333;
    padding: 8px 18px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.85rem;
    transition: all 0.25s ease;
}

.home-btn:hover {
    background: #e0b842;
    transform: translateY(-1px);
}

/* ===== MAIN ===== */
main {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 1200px;
    margin: 25px auto 40px;
    gap: 20px;
}

/* Form container */
.form-container {
    flex: 1 1 350px;
    min-width: 280px;
    max-width: 400px;
    background: rgba(255,255,255,0.95);
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

label {
    font-weight: 700;
    color: #c62828;
    font-size: 0.95rem;
}

input, select, textarea {
    padding: 12px;
    border: 2px solid #f2c94c;
    border-radius: 8px;
    font-size: 1em;
}

button {
    background: #f2c94c;
    color: #333;
    border: none;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: 0.2s;
}

button:hover {
    background: #e0b842;
    transform: translateY(-1px);
}

#message {
    margin-top: 10px;
    color: #2e7d32;
    font-weight: 700;
    font-size: 0.9rem;
}

/* Calendar container */
.calendar-container {
    flex: 2 1 600px;
    min-width: 300px;
    background: rgba(255,255,255,0.95);
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    overflow-x: auto;
}

/* Calendar controls */
#calendar-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 10px;
}

#calendar-controls button {
    background: #f2c94c;
    border: none;
    padding: 10px 18px;
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
    flex: 1 1 100px;
}

#monthYear {
    font-size: 1.6rem;
    color: #c62828;
    font-weight: 700;
    flex: 1 1 auto;
    text-align: center;
}

/* Calendar grid */
#calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr); /* fixed 7 columns */
    gap: 12px;
}

.day-header {
    text-align: center;
    font-weight: 700;
    padding: 10px 0;
    background: #c62828;
    color: #fff;
    border-radius: 8px;
    font-size: 0.9rem;
}

.day {
    background: #ffffff;
    border-radius: 12px;
    padding: 10px;
    min-height: 135px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    position: relative;
    display: flex;
    flex-direction: column;
}

.today {
    border: 2px solid #c62828;
    background: #fff8e1;
}

.available {
    background: #e8f5e9;
    color: #2e7d32;
    font-size: 0.75rem;
    padding: 6px;
    border-radius: 6px;
    margin-top: 6px;
    font-weight: 600;
}

.booked {
    background: #fdecea;
    color: #b71c1c;
    font-size: 0.75rem;
    padding: 6px;
    border-radius: 6px;
    margin-top: 6px;
    font-weight: 700;
}

.pencil-book {
    background: #ff9800;
    color: #fff;
    font-size: 0.75rem;
    padding: 6px;
    border-radius: 6px;
    margin-top: 6px;
    font-weight: 700;
}

.confirmed {
    background: #4caf50;
    color: #fff;
    font-size: 0.75rem;
    padding: 6px;
    border-radius: 6px;
    margin-top: 6px;
    font-weight: 700;
}

/* Past days */
.past {
    background: #f1f1f1;
    color: #999;
    box-shadow: none;
    pointer-events: none;
}

.past::after {
    content: "PAST";
    position: absolute;
    top: 8px;
    right: 10px;
    font-size: 0.6rem;
    background: #bdbdbd;
    color: #fff;
    padding: 2px 6px;
    border-radius: 6px;
    font-weight: 700;
}

.past .available,
.past .booked,
.past .pencil-book,
.past .confirmed {
    background: #e0e0e0;
    color: #9e9e9e;
}

.edit-btn, .delete-btn {
    display: inline-block;
    margin-left: 5px;
    font-size: 0.65rem;
    padding: 2px 5px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 700;
}

.edit-btn { background: #ffd54f; color: #333; }
.edit-btn:hover { background: #ffc107; }

.delete-btn { background: #e57373; color: #fff; }
.delete-btn:hover { background: #d32f2f; }

/* ===== MOBILE & TABLET ===== */
@media (max-width: 992px) {
    main { flex-direction: column; }
    .form-container, .calendar-container { width: 100%; max-width: none; }
}

@media (max-width: 768px) {
    .top-header {
        flex-direction: column;
        text-align: center;
        padding: 15px 20px;
    }
    .header-left {
        font-size: 1.1rem;
        margin-bottom: 10px;
    }
    .home-btn {
        font-size: 0.8rem;
        padding: 6px 12px;
    }
    #calendar-controls {
        flex-direction: column;
        gap: 15px;
    }
    #monthYear {
        font-size: 1.4rem;
    }
}

@media (max-width: 480px) {
    .top-header {
        padding: 12px 15px;
    }
    .header-left {
        font-size: 1rem;
    }
    .home-btn {
        font-size: 0.75rem;
        padding: 5px 10px;
    }
    .form-container, .calendar-container {
        padding: 20px;
    }
    .day {
        min-height: 120px;
        padding: 8px;
    }
    .day-header {
        font-size: 0.8rem;
        padding: 8px 0;
    }
}
</style>
</head>

<body>
<header class="top-header">
    <div class="header-left">üçî MCDONALD'S EDSA CALOOCAN - EVENT PLANNER (Admin)</div>
    <a href="https://sites.google.com/view/mcdoedsacaloocan?usp=sharing" class="home-btn">Home</a>
</header>

<main>
    <div class="form-container">
        <form id="eventForm">
            <label for="date">Date:</label>
            <input type="date" id="date" required>

            <label for="type">Event Type:</label>
            <select id="type" required>
                <option value="Party">Party</option>
                <option value="Business Meeting">Business Meeting</option>
                <option value="Other">Other</option>
            </select>

            <label for="slot">Time Slot:</label>
            <select id="slot" required>
                <option value="06:00-07:30">6:00‚Äì7:30 AM</option>
                <option value="09:00-10:30">9:00‚Äì10:30 AM</option>
                <option value="14:00-15:30">2:00‚Äì3:30 PM</option>
                <option value="17:00-18:30">5:00‚Äì6:30 PM</option>
                <option value="20:00-21:30">8:00‚Äì9:30 PM</option>
            </select>

            <label for="status">Status:</label>
            <select id="status" required>
                <option value="Pencil Book">Pencil Book</option>
                <option value="Confirmed">Confirmed</option>
            </select>

            <label for="description">Description:</label>
            <textarea id="description" placeholder="Event details..."></textarea>

            <button type="submit" id="addBtn">Add Event</button>
        </form>
        <div id="message"></div>
    </div>

    <div class="calendar-container">
        <div id="calendar-controls">
            <button id="prevMonth">Prev</button>
            <h2 id="monthYear"></h2>
            <button id="nextMonth">Next</button>
        </div>
        <div id="calendar"></div>
    </div>
</main>

<script>
let currentDate = new Date();
let editingEvent = null;

function loadEvents() { return JSON.parse(localStorage.getItem('mcdonaldsEvents') || '{}'); }
function saveEvents(events) { localStorage.setItem('mcdonaldsEvents', JSON.stringify(events)); }

function generateTimeSlots(type) {
    if (type === 'Business Meeting') {
        return [
            { key: "06:00-08:00", display: "6:00‚Äì8:00 AM" },
            { key: "08:00-10:00", display: "8:00‚Äì10:00 AM" },
            { key: "10:00-12:00", display: "10:00‚Äì12:00 AM" }
        ];
    } else {
        return [
            { key: "06:00-07:30", display: "6:00‚Äì7:30 AM" },
            { key: "09:00-10:30", display: "9:00‚Äì10:30 AM" },
            { key: "14:00-15:30", display: "2:00‚Äì3:30 PM" },
            { key: "17:00-18:30", display: "5:00‚Äì6:30 PM" },
            { key: "20:00-21:30", display: "8:00‚Äì9:30 PM" }
        ];
    }
}

// Update slots when type changes
document.getElementById('type').addEventListener('change', function() {
    const type = this.value;
    const slotSelect = document.getElementById('slot');
    slotSelect.innerHTML = '';
    const slots = generateTimeSlots(type);
    slots.forEach(slot => {
        const option = document.createElement('option');
        option.value = slot.key;
        option.textContent = slot.display;
        slotSelect.appendChild(option);
    });
});

// Form submit (Add / Update)
document.getElementById('eventForm').addEventListener('submit', e => {
    e.preventDefault();
    const date = document.getElementById('date').value;
    const slot = document.getElementById('slot').value;
    const type = document.getElementById('type').value;
    const status = document.getElementById('status').value;
    const description = document.getElementById('description').value;

    const events = loadEvents();
    if (!events[date]) events[date] = {};

    if(editingEvent){
        if(editingEvent.date !== date || editingEvent.slot !== slot){
            delete events[editingEvent.date][editingEvent.slot];
        }
        editingEvent = null;
        document.getElementById('addBtn').textContent = 'Add Event';
    } else {
        if(events[date][slot]){
            document.getElementById('message').textContent = 'Time slot already booked!';
            return;
        }
    }

    events[date][slot] = { type, description, status };
    saveEvents(events);
    document.getElementById('message').textContent = 'Event saved successfully!';
    e.target.reset();
    renderCalendar();
});

// Calendar render
function renderCalendar(){
    const year=currentDate.getFullYear();
    const month=currentDate.getMonth();
    const daysInMonth=new Date(year,month+1,0).getDate();
    const firstDay=new Date(year,month,1).getDay();
    const today=new Date(); today.setHours(0,0,0,0);

    const calendar=document.getElementById('calendar');
    calendar.innerHTML='';

    document.getElementById('monthYear').textContent=`${currentDate.toLocaleString('default',{month:'long'})} ${year}`;

    ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d=>{
        const h=document.createElement('div');
        h.className='day-header';
        h.textContent=d;
        calendar.appendChild(h);
    });

    for(let i=0;i<firstDay;i++){
        const empty=document.createElement('div');
        empty.className='day';
        calendar.appendChild(empty);
    }

    const events=loadEvents();

    for(let day=1;day<=daysInMonth;day++){
        const dayDiv=document.createElement('div');
        dayDiv.className='day';
        const dateObj=new Date(year,month,day); dateObj.setHours(0,0,0,0);
        if(dateObj<today) dayDiv.classList.add('past');
        if(dateObj.getTime()===today.getTime()) dayDiv.classList.add('today');

        dayDiv.innerHTML=`<strong>${day}</strong>`;
        const dateKey=`${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
        const dayEvents=events[dateKey]||{};

        // Determine slots: always include Party slots, add Business if any Business Meeting
        let slots = generateTimeSlots('Party');
        let hasBusinessMeeting = false;
        Object.values(dayEvents).forEach(event => {
            if (event.type === 'Business Meeting') hasBusinessMeeting = true;
        });
        if (hasBusinessMeeting) {
            slots = slots.concat(generateTimeSlots('Business Meeting'));
        }

        slots.forEach(slot=>{
            const slotDiv=document.createElement('div');

            if(dayEvents[slot.key]){
                const event = dayEvents[slot.key];
                if (event.status === 'Pencil Book') {
                    slotDiv.className='pencil-book';
                } else if (event.status === 'Confirmed') {
                    slotDiv.className='confirmed';
                } else {
                    slotDiv.className='booked';
                }
                slotDiv.textContent=`${slot.display} - ${event.type}`;

                if(!dayDiv.classList.contains('past')){
                    const editBtn=document.createElement('span');
                    editBtn.textContent='Edit';
                    editBtn.className='edit-btn';
                    editBtn.addEventListener('click',()=> {
                        document.getElementById('type').value=event.type;
                        document.getElementById('type').dispatchEvent(new Event('change'));
                        document.getElementById('date').value=dateKey;
                        document.getElementById('slot').value=slot.key;
                        document.getElementById('status').value=event.status;
                        document.getElementById('description').value=event.description;
                        document.getElementById('addBtn').textContent='Update Event';
                        editingEvent={date:dateKey, slot:slot.key};
                    });
                    const deleteBtn=document.createElement('span');
                    deleteBtn.textContent='Delete';
                    deleteBtn.className='delete-btn';
                    deleteBtn.addEventListener('click',()=> {
                        if(confirm('Are you sure you want to delete this event?')){
                            delete events[dateKey][slot.key];
                            saveEvents(events);
                            renderCalendar();
                        }
                    });
                    slotDiv.appendChild(editBtn);
                    slotDiv.appendChild(deleteBtn);
                }
            } else {
                slotDiv.className='available';
                slotDiv.textContent=`${slot.display} - Available`;
            }
            dayDiv.appendChild(slotDiv);
        });
        calendar.appendChild(dayDiv);
    }
}

renderCalendar();
document.getElementById('prevMonth').add
